
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Defensive Programming &#8212; Programming for DS  documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="How computers think about numbers and text" href="data_types.html" />
    <link rel="prev" title="Welcome to Programming for Data Science!" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 5ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<div class="section" id="Defensive-Programming">
<h1>Defensive Programming<a class="headerlink" href="#Defensive-Programming" title="Permalink to this headline">¶</a></h1>
<p>It’s natural to think that the reason we find problems in the code behind published papers is carelessness or inattention on behalf of authors, and that the key to minimizing problems in our code is to be more careful. The truth, I have come to believe, is more subtle: humans are effectively incapable of writing error-free code, and that if we wish to improve the quality of the code we write, we must start learning and teaching coding skills that help maximize the probability our mistakes will
be found and corrected.</p>
<p>I myself once firmly believed the fallacy that the key to preventing errors was “to be more careful.” Indeed, I fear this belief may have colored the tone of of my past work on this subject in unproductive ways. Over the last few years, however, my research has brought me into close contact with computer scientists, and I discovered that computer scientists’ mentality about programming is fundamentally different from the mental model I had been carrying around. Computer scientists assume
programmers will make mistakes, and instead of chiding people to “just be careful,” they have developed a battery of practices to address the problem. These practices – often referred to as “defensive programming” – are designed to (a) minimize the probability mistakes occur and (b) maximize the probability that mistakes that do occur are caught.</p>
<div class="section" id="Adding-Tests">
<h2><strong>Adding Tests</strong><a class="headerlink" href="#Adding-Tests" title="Permalink to this headline">¶</a></h2>
<p>If we could only adopt one practice to improve the quality of our code, my vote would be for the addition of tests. Tests are simple true-false statements users place in their code. A test checks for a certain condition (like whether the sample size in a regression is what you expect), and if the condition is not met, stops your code and alerts you to the problem. Right now, many users may say “Yeah, I always check that kind of stuff by hand when I’m writing my code. Why do I need to add tests?”
The answer is four-fold:</p>
<ol class="arabic simple">
<li><strong>Tests are executed *every time your code is run*.</strong> Most of us check things the first time we write a piece of code. But days, weeks, or months later, we may come back, modify code the occurs earlier in our code stream, and then just re-run the code. If those changes lead to problems in later files, we don’t know about them. If you have tests in place, then those early changes will result in an error in the later files, and you can track down the problem.</li>
<li><strong>It gets you in the habit of always checking.</strong> Most of us only stop to check aspects of our data when we suspect problems. But if you become accustomed to writing a handful of tests at the bottom of every file – or after ever execution of a certain operation (I’m trying to always including them after a merge), we get into the habit of <em>always</em> stopping to think about what our data should look like.</li>
<li><strong>Catch your problems faster.</strong> This is less about code integrity than sanity, but a great upside to tests is that they ensure that if a mistake slips into your code, you become aware of it quickly, making it easier to identify and fix the changes that caused the problem.</li>
<li><strong>Tests catch more than anticipated problems.</strong> When problems emerge in code, they often manifest in lots of different ways. Duplicate observations, for example, will not only lead to inaccurate observation counts, but may also give rise to bizarre summary statistics, bad subsequent merges, etc. Thus adding tests not only guards against errors we’ve thought of, but may also guard against errors we don’t anticipate during the test writing process.</li>
</ol>
<div class="section" id="Writing-Tests">
<h3><strong>Writing Tests</strong><a class="headerlink" href="#Writing-Tests" title="Permalink to this headline">¶</a></h3>
<p>Tests are easy to write in any language. In Stata, for example, tests can be performed using the <code class="docutils literal notranslate"><span class="pre">assert</span></code> statement. For example, to test whether your data set has 100 observations or that a variable meant to hold percentages has reasonable values, you could write:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>* Test if data has 100 observations
count
assert `r(N)&#39;==100

* Test variable percent_employed has reasonable values
assert percent_employed &gt; 0 &amp; percent_employed &lt; 100
</pre></div>
</div>
<p>Similarly in R, one could do the same tests on a data.frame <code class="docutils literal notranslate"><span class="pre">df</span></code> using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># Test if data has 100 observations
stopifnot(nrow(df)==100)

# Test variable has reasonable values
stopifnot(df$percent_employed &gt; 0 &amp; df$percent_employed &lt; 100)
</pre></div>
</div>
</div>
</div>
<div class="section" id="Never-Transcribe">
<h2><strong>Never Transcribe</strong><a class="headerlink" href="#Never-Transcribe" title="Permalink to this headline">¶</a></h2>
<p>We’ve already covered tricks to maximize the probability we catch our mistakes, but how do we minimize the probability they will occur? If there is anything we learned at the <em>QJPS</em>, it is that authors should never transcribe numbers from their statistical software into their papers by hand. This was <em>easily</em> the largest source of replication issues we encountered, as doing so introduced two types of errors:</p>
<ul class="simple">
<li><strong>Mis-transcriptions:</strong> Humans just aren’t built to transcribe dozens of numbers by hand reliably. If the error is in the last decimal place, it doesn’t mean much, but when a decimal point drifts or a negative sign is dropped, the results are often quite substantively important.</li>
<li><strong>Failures to Update:</strong> We are constantly updating our code, and authors who hand transcribe their results often update their code and forget to update all of their results, leaving old results in their paper.</li>
</ul>
<p>How do you avoid this problem? For LaTeX users, I strongly suggest tools that export <code class="docutils literal notranslate"><span class="pre">.tex</span></code> files that can be pulled directly into LaTeX documents. I also suggest users not only do this for tables - which is increasingly common - but also statistics that appear in text. In your code, generate the number you want to cite, convert it to a string, and save it as a <code class="docutils literal notranslate"><span class="pre">.tex</span></code> file (e.g. <code class="docutils literal notranslate"><span class="pre">exported_statistic.tex</span></code>). Then in your paper, simply add a <code class="docutils literal notranslate"><span class="pre">\input{exported_statistic.tex}</span></code>call, and LaTeX
will insert the contents of that <code class="docutils literal notranslate"><span class="pre">.tex</span></code> file verbatim into your paper. Directly integrating output is somewhat harder to do if you work in Word, but is still feasible. For example, most packages that generate<code class="docutils literal notranslate"><span class="pre">.tex</span></code> files that can be easily integrated into LaTeX also often have options to export to <code class="docutils literal notranslate"><span class="pre">.txt</span></code> or <code class="docutils literal notranslate"><span class="pre">.rtf</span></code> files that you can easily use in Word. <code class="docutils literal notranslate"><span class="pre">write.table()</span></code> in R or <code class="docutils literal notranslate"><span class="pre">esttab</span></code> in Stata, for example, will both create output of this type you can put in a Word document. These
tools can be used to generate tables can either be (a) copied whole-cloth into Word by hand (minimizing the risk of mis-transcriptions that may occur when typing individual values), or (b) using Word’s <em>`Link to Existing File &lt;https://support.office.com/en-us/article/Insert-an-object-in-Word-or-Outlook-8fc1ea53-0e01-4603-a4cf-98c49b6ea3f5&gt;`__</em> feature to connect your Word document to the output of your code in a way that ensures the Word doc loads the most recent version of the table every time
Word is opened. Some great tips for combining R with Word <a class="reference external" href="http://stanford.edu/~ejdemyr/r-tutorials/tables-in-r/">can be found here</a>.</p>
</div>
<div class="section" id="Style-Matters">
<h2><strong>Style Matters</strong><a class="headerlink" href="#Style-Matters" title="Permalink to this headline">¶</a></h2>
<p>Formatting isn’t just about aesthetics, it also makes it easier to read your code and thus recognize potential problems. Here are a few tips:</p>
<ul class="simple">
<li><strong>Use informative variable names.</strong> Don’t call something <code class="docutils literal notranslate"><span class="pre">var212</span></code> if you can call it <code class="docutils literal notranslate"><span class="pre">unemployment_percentage</span></code>. Informative names require more typing, but they make your code so much easier to read. Moreover, including units in your variables names (<code class="docutils literal notranslate"><span class="pre">percentage</span></code>, <code class="docutils literal notranslate"><span class="pre">km</span></code>, etc.) can also help avoid confusion.</li>
<li><strong>Comment!</strong> Comments help in two ways. First, and most obviously, they make it easy to figure out what’s going on when you come back to code days, weeks, or months after it was originally written. And second, it forces you to think about what you’re doing in <em>substantive</em> terms (“This section calculates the share of people within each occupation who have college degrees”) rather than just in programming logic, which can help you catch <em>substantive</em> problems with code that may run without
problems but will not actually generate the quantity of interest.</li>
<li><strong>Use indentation.</strong> Indentation is a way of visually representing the logical structure of code – use it to your advantage!</li>
<li><strong>Let your code breathe.</strong> In general, you should put a space between every operator in your code, and feel free to use empty lines. Space makes your code more readable, as illustrated in the following examples:</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Good</span>
<span class="n">average</span> <span class="o">&lt;-</span> <span class="n">mean</span><span class="p">(</span><span class="n">feet</span> <span class="o">/</span> <span class="mi">12</span> <span class="o">+</span> <span class="n">inches</span><span class="p">,</span> <span class="n">na</span><span class="o">.</span><span class="n">rm</span> <span class="o">=</span> <span class="n">TRUE</span><span class="p">)</span>

<span class="c1"># Bad</span>
<span class="n">average</span><span class="o">&lt;-</span><span class="n">mean</span><span class="p">(</span><span class="n">feet</span><span class="o">/</span><span class="mi">12</span><span class="o">+</span><span class="n">inches</span><span class="p">,</span><span class="n">na</span><span class="o">.</span><span class="n">rm</span><span class="o">=</span><span class="n">TRUE</span><span class="p">)</span>
</pre></div>
</div>
<p><a class="reference external" href="http://adv-r.had.co.nz/Style.html">A full style guide for R can be found here</a>, and a <a class="reference external" href="https://michaelshill.net/2015/07/31/in-stata-coding-style-is-the-essential/">Stata style guide can be found here</a>.</p>
</div>
<div class="section" id="Don’t-Duplicate-Information">
<h2><strong>Don’t Duplicate Information</strong><a class="headerlink" href="#Don’t-Duplicate-Information" title="Permalink to this headline">¶</a></h2>
<p>Tricks to minimize the probability of errors often require a little more sophisticated programming, so they won’t be for everyone (tests, I feel, are more accessible to everyone). Nevertheless, here’s another valuable practice: <strong>Never replicate information.</strong> Information should only be expressed once in a file. For example, say you want to drop observations if the value of a set of variables is greater than a common cutoff (just assume this is something you want to do – the specific operation
is not important). In Stata, for example, you could do this by:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">drop</span> <span class="k">if</span> <span class="n">var1</span> <span class="o">&lt;</span> <span class="mi">110</span>
<span class="n">drop</span> <span class="k">if</span> <span class="n">var2</span> <span class="o">&lt;</span> <span class="mi">110</span>
<span class="n">drop</span> <span class="k">if</span> <span class="n">var3</span> <span class="o">&lt;</span> <span class="mi">110</span>
</pre></div>
</div>
<p>And indeed, this would work. But suppose you decided to change that cutoff from 110 to 100. The way this is written, you’ve opened yourself up to the possibility that in trying to change these cutoffs, you may change two of these but forget the third (something especially likely if the uses of the cutoff aren’t all in exactly the same place in your code). A better way of expressing this that avoids this possibility is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>local cutoff = 110
drop if var1 &lt; `cutoff&#39;
drop if var2 &lt; `cutoff&#39;
drop if var3 &lt; `cutoff&#39;
</pre></div>
</div>
<p>Written like this, if you ever decide to go back and change the common cutoff, you only have to make one change, and there’s no way to make the change in some cases but forget others.</p>
</div>
<div class="section" id="Collaboration">
<h2>Collaboration<a class="headerlink" href="#Collaboration" title="Permalink to this headline">¶</a></h2>
<p>Until now, the focus of this piece has been on <em>individual</em> coding practices that minimize the risk of errors. But as social science becomes increasingly collaborative, we also need to think about how to avoid errors in collaborative projects. In my experience, the way most social scientists collaborate on code (myself included, historically) is to place their code in a shared folder (like Dropbox or Box) and have co-authors work on the same files. There are a number of problems with this
strategy, however:</p>
<ul class="simple">
<li>Participants can ever be certain about the changes the other author has made. Changes may be obvious when an author adds a new file or large block of code, but if one participant makes a small change in an existing file, the other authors are unlikely to notice. If the other authors then write their code assuming the prior coding was still in place, problems can easily emerge.</li>
<li>There is no clear mechanism for review built into the workflow. Edits occur silently, and immediately become part of the files used in a project.</li>
</ul>
<p>I am aware of three strategies for avoiding these types of problems. The first and most conservative solution to this is <strong>full replication</strong>, where each author conducts the full analysis independently and authors then compare results. If results match, authors can feel confident there are no problems in their code. But this strategy requires a massive duplication of effort – offsetting many of the benefits of co-authorship – and requires both authors be <em>able</em> to conduct the entire analysis,
which is not always the case. The second strategy is <strong>compartmentalization</strong>, in which each author is assigned responsibility for coding specific parts of the analysis. Author A, for example, may be responsible for importing, cleaning, and formatting data from an outside source while Author B is responsible for subsequent analysis. In this system, if Author B finds she need an additional variable for the analysis, she ask Author A to modify Author A’s code rather than making modifications
herself. This ensures responsibility for each block of code is clearly delimited, and changes are unlikely to sneak into an Author’s code without their knowledge. In addition, authors can also then review one another’s code prior to project finalization.<a class="reference external" href="#f1">[1]</a><a class="reference external" href="#f2">[2]</a> The final strategy is to <strong>use version control</strong>, which is by far the most robust solution and the one most used by computer scientists, but also the one that requires the most upfront investment in learning a new
skill. “Version control” is the name for a piece of software specifically designed to manage collaboration on code (several exist, but <code class="docutils literal notranslate"><span class="pre">git</span></code> is by far the most well known and the only one I would recommend). Version control does several things. First, as the name implies, it keeps track of <em>every</em> version of your code that has ever existed and makes it easy to go back to old versions. This service is often provided by services like Dropbox, it is much easier to review old versions and
identifying differences between old and new versions in <code class="docutils literal notranslate"><span class="pre">git</span></code> than through a service like Dropbox, whose interface is sufficiently cumbersome and most of us never use it unless we accidentally delete an important file. What really makes version control exceptional is that it makes it easy to (a) keep track of what differs between any two versions, and to (b) “propose” changes to code in a way that other authors can easily review before those changes are fully integrated. If Author A wants to
modify code in version control, she first creates a “branch” – a kind of working version of the project. She then makes her changes on that branch and propose the branch be re-integrated into the main code. Version control is then able to present this proposed change in a very clear way, highlighting every change that the new branch would make to the code base to ensure no changes – no matter how small – go unnoticed. The author that made the proposed changes can then ask their co-author to
review the changes before they are integrated into the code base. To illustrate, Figure 1 shows an example of what a simple proposed change to code looks like on <em>GitHub</em>, a popular site for managing <code class="docutils literal notranslate"><span class="pre">git</span></code> projects online.</p>
<p><strong>Figure 1: ``git`` Pull Request on *GitHub*</strong></p>
<p><a class="reference external" href="../media/git_example1.png">git_example</a></p>
<p>The Figure shows an example of a small proposed change to the code for a project on <em>GitHub</em>. Several aspects of the interface are worth noting. First, the interface displays <em>all</em> changes and the lines just above and below the changes across all documents in the project. This ensures no changes are overlooked. (Authors can click to “unfold” the code around a change if they need more context.) Second, the interface shows the prior contents of the project (on the left) and new content (on the
right). In the upper pane, content has been changed, so old content is shown in red and new content in green. In the lower pane, new content has just been added, so simple grey space is shown on the left. Third, authors can easily comment (and discuss) individual lines of code, as shown here.</p>
<p>Version control is an incredible tool, but it must be noted that it is not very user friendly. For those interested in making the jump, the tool to learn is <code class="docutils literal notranslate"><span class="pre">git</span></code>, and you can find a terrific set of tutorials <a class="reference external" href="https://www.atlassian.com/git/tutorials/what-is-version-control">from Atlassian here</a>, a nice (free, online) <a class="reference external" href="https://git-scm.com/book/en/v2">book on git here</a>, and a very nice, longer discussion of <code class="docutils literal notranslate"><span class="pre">git</span></code> for political scientists on <a class="reference external" href="https://thepoliticalmethodologist.com/2013/11/18/gitgithub-transparency-and-legitimacy-in-quantitative-research/">*The Political Methodologist*
here</a>. In addition, there are also two projects that attempt to smooth out the rough edges of the <code class="docutils literal notranslate"><span class="pre">git</span></code> user-interface. <a class="reference external" href="https://desktop.github.com/">Github Desktop</a>, for example, offers a Graphical User Interface and streamlines how <code class="docutils literal notranslate"><span class="pre">git</span></code> works. Similarly, <a class="reference external" href="http://www.git-legit.org/">git-legit</a> mimics the changes Github Desktop has made to how <code class="docutils literal notranslate"><span class="pre">git</span></code> works, but in the
form of a command-line interface. These services are fully compatible with normal <code class="docutils literal notranslate"><span class="pre">git</span></code>, but learning one of these versions has the downside of not learning the industry-standard <code class="docutils literal notranslate"><span class="pre">git</span></code> interface. For researchers who don’t plan to engage in contributing to open-source software or get a job in industry, however, that’s probably not a huge loss.</p>
<ul class="simple">
<li><a class="reference external" href="http://web.stanford.edu/~gentzkow/research/CodeAndData.pdf">*Code and Data for Social Scientists* handbook</a> written by Matthew Gentzkow and Jesse M. Shapiro</li>
<li><a class="reference external" href="http://www.jakebowers.org/PAPERS/tpm_v18_n2.pdf">*The Political Methodologist* issue on Work-Flow Management</a></li>
</ul>
<p>—- <em>Thank you to `Adriane Fresh &lt;http://www.adrianefresh.com/&gt;`__, `Simon Ejdemyr &lt;http://stanford.edu/~ejdemyr/&gt;`__, `Darin Christensen &lt;http://darinchristensen.github.io/&gt;`__, `Dorothy Kronick &lt;http://dorothykronick.com/&gt;`__, `Julia Payson &lt;http://www.juliapayson.org/&gt;`__, `David Hausman &lt;http://www.david-hausman.com/&gt;`__ and Justin Esarey for their comments and contributions to this piece!</em></p>
<ol class="arabic simple">
<li>Note that the separation of responsibility does not need to be as crude as “cleaning” and “analysis” – this strategy simply requires that a single person has clear and sole responsibility for every line of code in the project.}</li>
</ol>
<p>2. Another intermediate strategy – which can be combined with compartmentalization – is to <strong>maintain a change log</strong> where authors record the date, files, and line-numbers of any changes they make. This eliminates the problem of edits going unnoticed. However, it is worth noting that this strategy only works if both authors are sufficiently diligent. If either (a) the author making changes fails to log all changes or does not describe them well, or (b) the reviewing author fails to go back into
the code to check all the changes reported in the change log, the system may still fail.</p>
<p>3.Users who google “defensive programming” will find many resources, but be aware many may not seem immediately applicable. Most defensive programming resources are written for computer scientists who are interested in writing applications to be distributed to users. Thus much of what is written is about how coders should “never trust the user to do what you expect.” There’s a clear analogy to “never assume your data looks like what you expect,” but nevertheless mapping the lessons in those
documents to data analysis applications can be tricky.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-r notranslate"><div class="highlight"><pre>
<span></span><span class="nf">stopifnot</span><span class="p">(</span><span class="m">1</span><span class="o">==</span><span class="m">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-r notranslate"><div class="highlight"><pre>
<span></span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Programming for DS</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Programming</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Defensive Programming</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Adding-Tests"><strong>Adding Tests</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="#Never-Transcribe"><strong>Never Transcribe</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="#Style-Matters"><strong>Style Matters</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="#Don’t-Duplicate-Information"><strong>Don’t Duplicate Information</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="#Collaboration">Collaboration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="data_types.html">How Computers Think About Numbers</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_structures.html">Data Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="parallelism.html">Parallelism</a></li>
<li class="toctree-l1"><a class="reference internal" href="memory_hierarchy.html">Big Data and Memory Hierarchy</a></li>
<li class="toctree-l1"><a class="reference internal" href="performance.html">Speed</a></li>
</ul>
<p class="caption"><span class="caption-text">DS Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="workflow.html">Workflow Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="terminal.html">The Terminal</a></li>
<li class="toctree-l1"><a class="reference internal" href="jupyter.html">Jupyter Labs</a></li>
<li class="toctree-l1"><a class="reference internal" href="git_and_github.html">Git and Github</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_help.html">Getting Help Online</a></li>
<li class="toctree-l1"><a class="reference internal" href="languages.html">Programming Languages</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Welcome to Programming for Data Science!</a></li>
      <li>Next: <a href="data_types.html" title="next chapter">How computers think about numbers and text</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Nick Eubank.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/defensive_programming.ipynb.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-133829453-1']);
      _gaq.push(['_setDomainName', 'none']);
      _gaq.push(['_setAllowLinker', true]);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
    
  </body>
</html>